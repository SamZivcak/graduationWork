const Client = require("pg").Client;
require("dotenv").config();

const client = new Client({
  host: "127.0.0.1",
  port: 5432,
  database: "botDatabase",
  user: "tutorial",
  password: "heslo",
});

async function testConnectDatabase() {
  await client.connect();
  console.log("Connection acquired.");
  await client.end();
}

async function boughtStock() {
  await client.connect();
  await client.query(
    `INSERT INTO "stocks_info" ("stock_name","stock_amount","stock_buy_price", "foreign_discord_id")
      VALUES($1, $2, $3, $4)`,
    [stock_name, stock_amount, stock_buy_price, foreign_discord_id]
  );
  await client.end();
}

async function updateUsers() {
  await client.connect();
  await client.query(
    `INSERT INTO "users" ("username","discord_id")
      VALUES($1, $2)`,
    [username, discord_id]
  );
  await client.end();
}

module.exports = { testConnectDatabase, boughtStock, updateUsers };
